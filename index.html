<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital MAR Documentation Training</title>
<style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 40px; }
    h1 { color: forestgreen; font-size: 2em; font-weight: bold; }
    p { color: #555; font-size: 1.2em; font-weight: bold; }
    #checkmark { display: none; font-size: 3em; color: forestgreen; margin-top: 20px; }
    #test-section { display: none; margin-top: 30px; }
    .retake-section { margin-top: 20px; }
    .retake-btn { background-color: forestgreen; color: white; padding: 10px 20px; font-size: 1em; font-weight: bold; border: none; cursor: pointer; border-radius: 5px; }
    .retake-btn:hover { background-color: #228B22; }
</style>
</head>
<body>
    <h1>Welcome to Digital MAR Documentation Training</h1>
    <p>Please watch the entire video. Once completed please take the exit test. Thank you.</p>

    <!-- Embedded YouTube Video -->
    <div>
        <iframe id="trainingVideo" width="560" height="315" src="https://www.youtube.com/embed/MfhfOUhGt8Q?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <!-- Green Checkmark -->
    <div id="checkmark">âœ”</div>

    <!-- Test Section -->
    <div id="test-section">
        <div id="survey-container"></div>
    </div>

    <script>
        // Load YouTube IFrame API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('trainingVideo', {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                document.getElementById('checkmark').style.display = 'block';
                document.getElementById('test-section').style.display = 'block';
                loadSurvey();
            }
        }

        function loadSurvey() {
            var container = document.getElementById('survey-container');
            container.innerHTML = ''; // Clear previous content

            // Create SurveyMonkey script dynamically
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.async = true;
            script.src = 'https://widget.surveymonkey.com/collect/website/js/tRaiETqnLgj758hTBazgd2IUF_2BzdC396tT6jqDxdOodX9xhs5KnAgU6wfxd7H28_2F.js';
            container.appendChild(script);

            // Add link
            var link = document.createElement('a');
            link.style.font = '12px Helvetica, sans-serif';
            link.style.color = '#999';
            link.style.textDecoration = 'none';
            link.href = 'https://www.surveymonkey.com';
            link.textContent = 'Create your own user feedback survey';
            container.appendChild(link);

            // Add retake section below
            var retakeDiv = document.createElement('div');
            retakeDiv.className = 'retake-section';

            var instruction = document.createElement('p');
            instruction.textContent = 'If you did not score 100%, please click link and try again.';
            retakeDiv.appendChild(instruction);

            var button = document.createElement('button');
            button.className = 'retake-btn';
            button.textContent = 'Click here to retake test';
            button.onclick = function() {
                loadSurvey(); // Reload survey for a fresh attempt
                container.scrollIntoView({ behavior: 'smooth' });
            };
            retakeDiv.appendChild(button);

            container.appendChild(retakeDiv);
        }
    </script>
</body>
</html>
